# 电影院售票系统用例文档 v1.0

南京大学软件学院
团队
陈立 潘祺阳 邰天成 翁溥鸿

2019.3.17

更新历史

| 修改人员 | 日期      | 变更原因 | 版本号 |
|----------|-----------|----------|--------|
| 全体     | 2019.5.29 | 最初草稿 | v1.0   |
| 翁溥鸿     | 2019.6.1 | 统一所有格式，对1-6用例细节修改 | v1.1   |

[TOC]



## 1.引言


### 1.1目的

本文档描述了电影院售票系统的用户需求。

### 1.2阅读说明

用例描述的约定为必须要包含用例
ID、名称、创建日期、最后一次更新日期、参与者、触发条件、前置条件、后置条件、优先级、正常流程、扩展流程特殊需求。其中流程要完整有序地描述该用例中使用者与系统的交互。

### 1.3参考文献

《软件开发的技术基础》，UML 2.0 语法，IEEE

## 2.用例图

![](http://47.111.9.220:80/第三次图片/总类图.png)

## 3.用例列表

| 参与者   | 用例               |
| -------- | ------------------ |
| 用户     | 退票               |
|          | 查看历史消费记录   |
|          | 查看历史充值记录   |
| 管理员   | 发布会员卡         |
|          | 修改会员卡优惠策略 |
|          | 影院角色的增删改查 |
| 影院员工 |                    |

## 4.详细用例描述
### 4.1. 用例1 发布会员卡

| ID       | 1                                                    | 名称           | 发布会员卡 |
| -------- | ---------------------------------------------------- | -------------- | --------------------- |
| 创建者   | 翁溥鸿                                               |  |                   |
| 创建日期 | 2019.6.12                                   | 最后更新日期   | 2019.6.12         |
| 参与者   | 管理员，目的是发布新的会员卡信息 |                |                       |
| 触发条件 | 管理员点击发布会员卡按钮                                     |                |                       |
| 前置条件 | 用户身份权限为管理员                                         |                |                       |
| 后置条件 | 系统增加新的会员卡信息                                       |                |                       |
| 优先级   | 高                                                   |                |                       |
| 正常流程 | 1.管理员申请发布会员卡         |                |                       |
|          | 2.系统提示请输入会员卡信息                           |                |                       |
| | 3.管理员输入会员卡信息 | | |
| | 4.系统新增会员卡信息 | | |
| 扩展流程 | 3a、 管理员取消发布会员卡                    |                |                       |
|          | 1.系统返回第一步之前的状态  |                ||
|  | 4a、同名会员卡已在系统中                                   | ||
| | 1.系统提示“系统中已存在同名会员卡，请重新输入信息”并返回第二步 | ||
| 特殊需求 | 系统在1s内反应 | ||


### 4.2. 用例2 修改会员卡优惠策略

| ID       | 2                                                            | 名称           | 修改会员卡优惠策略 |
| -------- | ------------------------------------------------------------ | -------------- | ------------------ |
| 创建者   | 翁溥鸿                                                       | 最后一次更新者 | 翁溥鸿             |
| 创建日期 | 2019.6.12                                                    | 最后更新日期   | 2019.6.12          |
| 参与者   | 管理员，目的是修改已发布的会员卡的优惠策略                   |                |                    |
| 触发条件 | 管理员点击修改会员卡按钮                                     |                |                    |
| 前置条件 | 用户权限等级为管理员                                         |                |                    |
| 后置条件 | 系统更新会员卡的信息                                         |                |                    |
| 优先级   | 高                                                           |                |                    |
| 正常流程 | 1.管理员申请修改会员卡的优惠策略                             |                |                    |
|          | 2.系统提示请输入修改信息                                     |                |                    |
|          | 3.管理员输入会员卡信息                                       |                |                    |
|          | 4.系统更新会员卡信息                                         |                |                    |
| 扩展流程 | 3a、 管理员取消修改会员卡优惠策略                            |                |                    |
|          | 1.系统返回第一步之前的状态                                   |                |                    |
|          | 4a、同名会员卡已在系统中                                     |                |                    |
|          | 1.系统提示“系统中已存在同名会员卡，请重新输入信息”并返回第三步 |                |                    |
| 特殊需求 | 系统要在1s内反应                                             |                |                    |

### 4.3. 用例3  影院角色管理

| ID       | 3                                                | 名称           | 影院角色管理 |
| -------- | ------------------------------------------------- | -------------- | ------------ |
| 创建者   | 翁溥鸿                                            | 最后一次更新者 | 翁溥鸿       |
| 创建日期 | 2019.6.12                                      | 最后更新日期   | 2019.6.12 |
| 参与者   | 管理员，目的是对系统所有用户信息进行管理，需要增删改查的功能 |                |              |
| 触发条件 | 管理员进入影院角色管理页面                                   |                |              |
| 前置条件 | 用户权限等级为管理员                                         |                |              |
| 后置条件 | 系统记录系统内用户的信息变更                   |                 |              |
| 优先级   | 高                                                |                |              |
| 正常流程 | 1.0 新增用户                                                 |                |              |
|  | 1.管理员申请新增用户 | | |
|  | 2.系统提示输入新增用户信息 | | |
|  | 3.管理员输入新增用户信息 | | |
|  | 4.系统增加新的用户信息 | | |
|  | 2.0 删除用户 | | |
|  | 1.管理员申请删除用户 | | |
|  | 2.系统询问是否确定删除 | | |
|  | 3.管理员确认删除 | | |
|  | 4.系统删除相应的用户信息 | | |
|  | 3.0 修改用户信息                                             | | |
|  | 1.管理员申请修改用户信息                                     | | |
|  | 2.系统提示输入用户信息 | | |
|  | 3.管理员输入用户信息                                         | | |
|  | 4.系统更新用户信息 | | |
|  | 4.0 根据用户名查找用户                                       | | |
|  | 1.管理员输入查找用户名 | | |
| | 2.管理员申请查找用户名 | | |
| | 3.系统返回查找的用户信息 | | |
| 扩展流程 | 1.0 | | |
|  | 3a、管理员取消新增用户 | | |
|  | 1.系统返回到第一步之前的状态 | | |
|  | 4a、系统中已有同名用户 | | |
|  | 2.0 | | |
|  | 2a、管理员取消删除用户 | | |
|  | 1.系统返第一步之前的状态                                     | | |
|  | 3.0                                                          | | |
|  | 3a、管理员取消修改用户信息                                   | | |
|  | 1.系统返回第一步之前的状态 | | |
|  | 4a、修改后的用户名已存在系统中 | | |
| | 1.系统提示”有同名用户已存在于系统中，请修改用户信息“，返回第三步 | | |
| 特殊需求 | 1s内做出反应 | | |

### 4.4 用例4 用户退票

| ID       | 4                                                          |                |           |
| -------- | ---------------------------------------------------------- | -------------- | --------- |
| 创建者   | 邰天成                                                     | 名称           | 用户退票  |
| 创建日期 | 2019.6.11                                                  | 最后一次更新者 | 邰天成    |
| 参与者   | 观众                                                       | 最后更新日期   | 2019.6.11 |
| 触发条件 | 用户点击退票按钮                                           |                |           |
| 前置条件 | 用户已购买电影票，且该场次退票截止时间晚于当前时间         |                |           |
| 后置条件 | 系统提示返回结果                                           |                |           |
| 优先级   | 高                                                         |                |           |
| 正常流程 | 1. 用户点击右上角查看电影票                                |                |           |
|          | 2. 系统返回已提交订单的电影票列表                          |                |           |
|          | 3. 用户点击退票按钮                                        |                |           |
|          | 4. 系统根据退票策略退换金额并更改订单状态提示退票成功      |                |           |
| 拓展流程 | 1a. 用户没有已购电影票                                     |                |           |
|          | 1. 系统提示用户没有已购电影                                |                |           |
|          | 3a. 当前时间晚于退票截止时间                               |                |           |
|          | 1. 系统提示退票失败                                        |                |           |
|          | 3b. 该场次电影没有退票信息                                 |                |           |
|          | 1. 系统提示退票失败                                        |                |           |
| 特殊需求 | 退票的金额应该扣取手续费，并且保证手续费高于优惠券优惠金额 |                |           |

### 4.5 用例5 新增退票策略

| ID       | 5                                                            |                |           |
| -------- | ------------------------------------------------------------ | -------------- | --------- |
| 创建者   | 邰天成                                                       | 名称           | 用户退票  |
| 创建日期 | 2019.6.11                                                    | 最后一次更新者 | 邰天成    |
| 参与者   | 影院管理员                                                   | 最后更新日期   | 2019.6.11 |
| 触发条件 | 用户点击新增退票策略按钮                                     |                |           |
| 前置条件 | 用户以管理员身份登录                                         |                |           |
| 后置条件 | 系统提示返回结果                                             |                |           |
| 优先级   | 高                                                           |                |           |
| 正常流程 | 1. 用户点击右上角新增退票策略按钮                            |                |           |
|          | 2. 系统弹出退票信息填写表单                                  |                |           |
|          | 3. 用户输入退票信息，包括描述、电影场次、退票截止时间、手续费折扣 |                |           |
|          | 4. 系统提交表单并提示成功信息                                |                |           |
| 拓展流程 | 3a. 必填信息为空                                             |                |           |
|          | 1. 系统提示用户没有填写必填信息                              |                |           |
|          | 3b. 电影开始时间早于退票截止时间                             |                |           |
|          | 1. 系统提示电影开始时间要晚于退票截止时间                    |                |           |
|          | 3c. 手续费折扣填写大于1或小于0                               |                |           |
|          | 1. 系统提示手续费折扣要在0到1之间                            |                |           |
| 特殊需求 | 无                                                           |                |           |

### 4.6 用例6 修改退票策略

| ID       | 6                                                            |                |              |
| -------- | ------------------------------------------------------------ | -------------- | ------------ |
| 创建者   | 邰天成                                                       | 名称           | 修改退票策略 |
| 创建日期 | 2019.6.11                                                    | 最后一次更新者 | 邰天成       |
| 参与者   | 影院管理员                                                   | 最后更新日期   | 2019.6.11    |
| 触发条件 | 用户点击已有退票策略                                         |                |              |
| 前置条件 | 用户以管理员身份登录且已存在退票策略                         |                |              |
| 后置条件 | 系统提示返回结果                                             |                |              |
| 优先级   | 高                                                           |                |              |
| 正常流程 | 1. 用户点击已有退票策略                                      |                |              |
|          | 2. 系统弹出退票信息填写表单                                  |                |              |
|          | 3. 用户输入退票信息，包括描述、退票截止时间、手续费折扣，电影场次不可修改 |                |              |
|          | 4. 系统提交表单并提示成功信息                                |                |              |
| 拓展流程 | 3a. 必填信息为空                                             |                |              |
|          | 1. 系统提示用户没有填写必填信息                              |                |              |
|          | 3b. 电影开始时间早于退票截止时间                             |                |              |
|          | 1. 系统提示电影开始时间要晚于退票截止时间                    |                |              |
|          | 3c. 手续费折扣填写大于1或小于0                               |                |              |
|          | 1. 系统提示手续费折扣要在0到1之间                            |                |              |
| 特殊需求 | 无                                                           |                |              |

### 4.7 用例7 用户查看充值记录 

| ID       | 7                             |                |           |
| -------- | ----------------------------- | -------------- | --------- |
| 创建者   | 陈立                          | 名称           | 用户退票  |
| 创建日期 | 2019.6.11                     | 最后一次更新者 | 陈立      |
| 参与者   | 观众                          | 最后更新日期   | 2019.6.11 |
| 触发条件 | 用户点击退票按钮              |                |           |
| 前置条件 | 用户已登陆                    |                |           |
| 后置条件 | 系统提示返回结果              |                |           |
| 优先级   | 高                            |                |           |
| 正常流程 | 1. 用户点击右上角查看充值纪录 |                |           |
|          | 2. 系统返回已有的充值记录     |                |           |
|          | 3. 用户点击具体充值记录       |                |           |
|          | 4. 系统返回具体的充值信息     |                |           |
| 拓展流程 | 1a. 用户没有充值信息          |                |           |
| 特殊需求 | 无                            |                |           |

### 4.8 用例8 用户查看消费记录 

| ID       | 8                             |                |                  |
| -------- | ----------------------------- | -------------- | ---------------- |
| 创建者   | 陈立                          | 名称           | 用户查看消费记录 |
| 创建日期 | 2019.6.13                     | 最后一次更新者 | 陈立             |
| 参与者   | 观众                          | 最后更新日期   | 2019.6.11        |
| 触发条件 | 用户点击消费记录按钮          |                |                  |
| 前置条件 | 用户已登陆                    |                |                  |
| 后置条件 | 系统提示返回结果              |                |                  |
| 优先级   | 高                            |                |                  |
| 正常流程 | 1. 用户点击右上角查看消费纪录 |                |                  |
|          | 2. 系统返回已有的消费记录     |                |                  |
|          | 3. 用户点击具体消费记录       |                |                  |
|          | 4. 系统返回具体的充值信息     |                |                  |
| 拓展流程 | 1a. 用户没有消费信息          |                |                  |
|          | 系统提醒请消费                |                |                  |
| 特殊需求 | 无                            |                |                  |

### 4.9 用例9 赠送优惠卷

| ID       | 9                                |                |            |
| -------- | -------------------------------- | -------------- | ---------- |
| 创建者   | 陈立                             | 名称           | 赠送优惠卷 |
| 创建日期 | 2019.6.13                        | 最后一次更新者 | 陈立       |
| 参与者   | 管理员                           | 最后更新日期   | 2019.6.13  |
| 触发条件 | 管理员点击赠送优惠卷按钮         |                |            |
| 前置条件 | 用户已登陆                       |                |            |
| 后置条件 | 系统提示返回结果                 |                |            |
| 优先级   | 高                               |                |            |
| 正常流程 | 1. 用户点击赠送优惠卷            |                |            |
|          | 2. 系统返回已有用户的消费记录    |                |            |
|          | 3. 管理员选择用户                |                |            |
|          | 4.管理员点击选择优惠卷           |                |            |
|          | 5.系统返回可使用的优惠卷         |                |            |
|          | 6.管理员选择优惠卷               |                |            |
|          | 7.管理员确认赠送优惠卷           |                |            |
|          | 8.系统返回赠送结果               |                |            |
| 拓展流程 | 2：1.管理员选择最低消费记录      |                |            |
|          | 2.系统返回符合要求的用户消费记录 |                |            |
|          | 2a.系统提示无符合条件用户        |                |            |
|          | 3：1.无可用优惠卷                |                |            |
|          | 2.系统提示请先发布优惠卷         |                |            |
|          | 4.: 1.管理员未选择用户或优惠卷   |                |            |
|          | 2.系统提示请选择                 |                |            |
| 特殊需求 | 无                               |                |            |

### 4.10 用例 10影厅信息录入

| ID       | 10                                                           | 名称           | 添加影厅信息 |
| -------- | ------------------------------------------------------------ | -------------- | ---------------- |
| 创建者   | 潘祺阳                                                   | 最后一次更新者 | 潘祺阳           |
| 创建日期 | 2019.6.14                                                    | 最后更新日期   | 2019.6.14        |
| 参与者   | 管理员，目的是添加影厅                           |                |                  |
| 触发条件 | 管理员点击影厅详情页面中的“添加”按钮                           |                |                  |
| 前置条件 | 管理员已经被识别及授权                                         |                |                  |
| 后置条件 | 系统对影厅数据进行修改         |                |                  |
| 优先级   | 高                                                           |                |                  |
| 正常流程 | 1.录入影院的影厅信息（名称、座位信息、大/中/小等）  1c.管理员确认 1d.系统录入影厅信息，添加影厅并显示 |        |            |
|          | 1a.管理员申请添加影厅                    |                |              |
|          | 1b.管理员输入影厅信息                    |                |              |
|          | 1c.管理员确认                    |                |              |
|          | 1d.系统录入影厅信息，添加影厅并显示                    |                |              |
| 扩展流程 | 1.已存在同名影厅                                                |        |            |
|          | 1a.系统提示“已存在同名影厅”                    |                |              |
| 补充说明 | 无                                                 |        |            |

### 4.11 用例11 修改影厅信息

| 用例名称 | 修改影厅信息                                                 | 参与者 | 影院管理员 |
|----------|--------------------------------------------------------------|--------|------------|
| ID      | 11                                                         | 名称           | 修改影厅信息 |
| 创建者   | 潘祺阳                                                   | 最后一次更新者 | 潘祺阳           |
| 创建日期 | 2019.6.14                                                    | 最后更新日期   | 2019.6.14        |
| 参与者   | 管理员，目的是修改影厅信息                         |                |                  |
| 触发条件 | 管理员点击影厅详情页面中的“修改”按钮                           |                |                  |
| 前置条件 | 管理员已经被识别及授权                                         |                |                  |
| 后置条件 | 系统对影厅数据进行修改         |                |                  |
| 优先级   | 高                                                           |                |                  |
| 正常流程 | 1.选择需要修改的影厅，录入影厅新的信息                         |        |            |
|          | 1a.系统显示当前影厅信息页                  |                |              |
|          | 1b.管理员修改信息                 |                |              |
|          | 1c.系统修改该影厅信息                 |                |              |
| 扩展流程 |      1.正在使用中的影厅不可修改信息，会影响已发售的影票和排片等                                                       |        |            |
|          | 1a.管理员确认修改                  |                |              |
|          | 1b.系统提示“该影厅正在被使用！”                 |                |              |
| 补充说明 |无  |        |            |

## 5需求分析模型

### 	5.1系统顺序图

![](http://47.111.9.220:80/第三次图片/用例文档wph顺序.png)

![](http://47.111.9.220:80/第三次图片/退票顺序图.png)

![](http://47.111.9.220:80/第三次图片/退票信息顺序.png)

![](http://47.111.9.220:80/第三次图片/充值记录顺序图.png)

![](http://47.111.9.220:80/第三次图片/消费记录顺序图.png)

![](http://47.111.9.220:80/第三次图片/赠送优惠卷.png)

![](http://47.111.9.220:80/第三次图片/影厅顺序图.png)


### 5.2概念类图

#### 总概念类图：

![](http://47.111.9.220:80/第三次图片/概念类图.png)

#### 概念类图：![](http://47.111.9.220:80/第三次图片/用例文档wph概念类图.png)

![](http://47.111.9.220:80/第三次图片/退票概念类图.png)

![](http://47.111.9.220:80/第三次图片/退票管理概念类图.png)

![](http://47.111.9.220:80/第三次图片/查看记录概念类图.png)

![](http://47.111.9.220:80/第三次图片/赠送优惠券概念类图.png)

![](http://47.111.9.220:80/第三次图片/影厅概念类图.png)

### 5.3状态图

![](http://47.111.9.220:80/第三次图片/用例文档wph状态图.png)

![](http://47.111.9.220:80/第三次图片/退票状态图.png)

![](http://47.111.9.220:80/第三次图片/退票管理状态图.png)

![](http://47.111.9.220:80/第三次图片/赠送优惠卷状态图.png)

![](http://47.111.9.220:80/第三次图片/影厅状态类图.png)
